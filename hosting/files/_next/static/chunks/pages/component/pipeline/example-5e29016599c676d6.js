(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8164],{95372:function(e){e.exports=function(e,n,r,t){for(var i=e.length,o=r+(t?1:-1);t?o--:++o<i;)if(n(e[o],o,e))return o;return-1}},56632:function(e,n,r){var t=r(89278),i=r(80068),o=r(50098);e.exports=function(e){return function(n,r,a){var s=Object(n);if(!i(n)){var c=t(r,3);n=o(n),r=function(e){return c(s[e],e,s)}}var l=e(n,r,a);return l>-1?s[c?n[l]:l]:void 0}}},92489:function(e,n,r){var t=r(56632)(r(1724));e.exports=t},1724:function(e,n,r){var t=r(95372),i=r(89278),o=r(47991),a=Math.max,s=Math.min;e.exports=function(e,n,r){var c=null==e?0:e.length;if(!c)return-1;var l=c-1;return void 0!==r&&(l=o(r),l=r<0?a(c+l,0):s(l,c-1)),t(e,i(n,3),l,!0)}},94919:function(e,n,r){var t=r(91936),i=1/0;e.exports=function(e){return e?(e=t(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},47991:function(e,n,r){var t=r(94919);e.exports=function(e){var n=t(e),r=n%1;return n===n?r?n-r:n:0}},76927:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Ve}});var t=r(90849),i=r(27378),o=r(43991),a=r(79303),s=r(23615),c=r.n(s),l=r(92489),u=r.n(l),f=r(46817),d=r(17231),h=r(68397),p=r(92677),g=r(68087),v=r(78174),b=r.n(v);function y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y(Object(r),!0).forEach((function(n){x(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function O(){return O=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},O.apply(this,arguments)}function z(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function j(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(o.push(t.value),!n||o.length!==n);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return N(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var C="Invariant failed";function k(e,n){if(!e)throw new Error(C)}function P(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function E(){return E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},E.apply(this,arguments)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=new Map,M=new Map,R=new Map,W=0;function A(e,n,r){void 0===r&&(r={}),r.threshold||(r.threshold=0);var t=r,i=t.root,o=t.rootMargin,a=t.threshold;if(_.has(e)&&k(!1),e){var s=function(e){return e?R.has(e)?R.get(e):(W+=1,R.set(e,W.toString()),R.get(e)+"_"):""}(i)+(o?a.toString()+"_"+o:a.toString()),c=M.get(s);c||(c=new IntersectionObserver(I,r),s&&M.set(s,c));var l={callback:n,element:e,inView:!1,observerId:s,observer:c,thresholds:c.thresholds||(Array.isArray(a)?a:[a])};return _.set(e,l),c.observe(e),l}}function H(e){if(e){var n=_.get(e);if(n){var r=n.observerId,t=n.observer,i=t.root;t.unobserve(e);var o=!1,a=!1;r&&_.forEach((function(n,t){t!==e&&(n.observerId===r&&(o=!0,a=!0),n.observer.root===i&&(a=!0))})),!a&&i&&R.delete(i),t&&!o&&t.disconnect(),_.delete(e)}}}function I(e){e.forEach((function(e){var n=e.isIntersecting,r=e.intersectionRatio,t=e.target,i=_.get(t);if(i&&r>=0){var o=i.thresholds.some((function(e){return i.inView?r>e:r>=e}));void 0!==n&&(o=o&&n),i.inView=o,i.callback(o,e)}}))}var D,X,$,B,T=function(e){var n,r;function t(){for(var n,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return P(V(n=e.call.apply(e,[this].concat(t))||this),"state",{inView:!1,entry:void 0}),P(V(n),"node",null),P(V(n),"handleNode",(function(e){n.node&&H(n.node),n.node=e||null,n.observeNode()})),P(V(n),"handleChange",(function(e,r){(e!==n.state.inView||e)&&n.setState({inView:e,entry:r}),n.props.onChange&&n.props.onChange(e,r)})),n}r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var o=t.prototype;return o.componentDidMount=function(){this.node||k(!1)},o.componentDidUpdate=function(e,n){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(H(this.node),this.observeNode()),n.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(H(this.node),this.node=null)},o.componentWillUnmount=function(){this.node&&(H(this.node),this.node=null)},o.observeNode=function(){if(this.node){var e=this.props,n=e.threshold,r=e.root,t=e.rootMargin;A(this.node,this.handleChange,{threshold:n,root:r,rootMargin:t})}},o.render=function(){var e=this.state,n=e.inView,r=e.entry;if(!function(e){return"function"!=typeof e.children}(this.props))return this.props.children({inView:n,entry:r,ref:this.handleNode});var t=this.props,o=t.children,a=t.as,s=t.tag;t.triggerOnce,t.threshold,t.root,t.rootMargin,t.onChange;var c=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange"]);return(0,i.createElement)(a||s||"div",E({ref:this.handleNode},c),o)},t}(i.Component);P(T,"displayName","InView"),P(T,"defaultProps",{threshold:0,triggerOnce:!1});var L,q,U={XSmall:"xsmall",Small:"small",Normal:"normal",Large:"large"},Z=(x(D={},U.XSmall,{borderRadius:4,chevron:{size:2},fontSize:12,fontWeight:600,gutter:{vertical:2,horizontal:4},height:22,lineHeight:1,minWidth:74}),x(D,U.Small,{borderRadius:4,chevron:{size:2},fontSize:14,fontWeight:600,gutter:{vertical:2,horizontal:6},height:25,lineHeight:1,minWidth:74}),x(D,U.Normal,{borderRadius:4,chevron:{size:3},fontSize:14,fontWeight:600,gutter:{vertical:2,horizontal:8},height:32,lineHeight:1,minWidth:74}),x(D,U.Large,{borderRadius:4,chevron:{size:4},fontSize:16,fontWeight:600,gutter:{vertical:2,horizontal:10},height:45,lineHeight:1,minWidth:74}),D),F={color:a.s.blue.base,primary:{backgroundColor:a.s.blue.light2},secondary:{backgroundColor:a.s.blue.light3}},J=function(e){var n=e.size,r=Z[n],t=r.height,i=r.lineHeight;return(0,d.css)(X||(X=j(["\n    display: flex;\n    height: ","px;\n    line-height: ",";\n  "])),t,i)},G=function(e){var n=e.size,r=Z[n].lineHeight;return(0,d.css)($||($=j(["\n    position: relative;\n    flex-direction: row;\n    line-height: ",";\n    align-items: center;\n    justify-content: center;\n  "])),r)},K=function(e){var n=e.size,r=Z[n],t=r.gutter,i=r.height/2+2*r.chevron.size,o=i;return(0,d.css)(B||(B=j(["\n    margin-left: ","px;\n    width: ","px;\n    height: 100%;\n    position: absolute;\n    right: -","px;\n    top: 0;\n    overflow: hidden;\n    align-self: center;\n\n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      transform-origin: 0 0;\n      transform: rotate(45deg);\n    }\n  "])),2*t.horizontal,i,o)},Q=(0,p.zB)("pipeline"),Y=(0,p.zB)("pipeline-stages"),ee=(0,p.zB)("pipeline-stage"),ne=(0,p.zB)("pipeline-stage-chevron"),re=(0,p.zB)("pipeline-counter"),te=(0,p.zB)("pipeline-counter-chevron"),ie=["children","className","intersectionNode","size","threshold"],oe=function(e){var n=e.size,r=void 0===n?U.XSmall:n,t=Z[r],i=t.chevron,o=t.height,s=F.primary,c=o/2;return(0,d.cx)(K({size:r}),(0,d.css)(q||(q=j(["\n      &::before {\n        background-color: ",";\n        box-shadow: 0 0 0 ","px ",",\n          0 0 0 ","px ",";\n      }\n    "])),s.backgroundColor,i.size,a.s.white,c,s.backgroundColor))},ae=(0,i.forwardRef)((function(e,n){var r,t=e.children,o=e.className,a=void 0===o?"":o,s=e.intersectionNode,c=e.size,l=e.threshold,u=void 0===l?.8:l,f=z(e,ie),h=function(e){void 0===e&&(e={});var n=(0,i.useRef)(),r=(0,i.useState)({inView:!1,entry:void 0}),t=r[0],o=r[1],a=(0,i.useCallback)((function(r){n.current&&H(n.current),r&&A(r,(function(n,t){o({inView:n,entry:t}),n&&e.triggerOnce&&H(r)}),e),n.current=r}),[e.threshold,e.root,e.rootMargin,e.triggerOnce]);return(0,i.useDebugValue)(t.inView),[a,t.inView,t.entry]}({threshold:u,root:s}),p=S(h,2),v=p[0],b=p[1],y=function(e){return{base:(n=e,r=n.size,t=void 0===r?U.XSmall:r,i=Z[t],o=i.borderRadius,a=i.chevron,s=i.fontSize,c=i.fontWeight,l=i.gutter,u=i.height,f=i.lineHeight,h=F.color,p=F.primary,g=u/2+2*a.size,(0,d.cx)(J({size:t}),G({size:t}),(0,d.css)(L||(L=j(["\n      background-color: ",";\n      color: ",";\n      padding: ","px ","px;\n      margin-right: ","px;\n      font-size: ","px;\n      font-weight: ",";\n      line-height: ",";\n      flex: 1 1 auto;\n      white-space: nowrap;\n      z-index: 1;\n\n      &:first-of-type {\n        border-top-left-radius: ","px;\n        border-bottom-left-radius: ","px;\n      }\n\n      &[data-stage-visible='false'] {\n        counter-increment: hiddenCount;\n      }\n    "])),p.backgroundColor,h,l.vertical,l.horizontal,g,s,c,f,o,o))),chevron:oe(e)};var n,r,t,i,o,a,s,c,l,u,f,h,p,g}({size:c}),m=y.base,w=y.chevron;return(0,g.jsx)("li",O({},f,ee.prop,{ref:(r=[v,n],function(e){r.forEach((function(n){"function"==typeof n?n(e):null!=n&&(n.current=e)}))}),"data-testid":"pipeline-stage","data-stage-visible":b,className:(0,d.cx)(m,a)}),t,(0,g.jsx)("div",O({"data-testid":"pipeline-stage-chevron"},ne.prop,{className:w})))}));ae.displayName="Stage",ae.propTypes={children:c().node.isRequired,className:c().string,intersectionNode:c().any,size:c().oneOf(Object.values(U)),threshold:c().oneOfType([c().number,c().arrayOf(c().number.isRequired)])};var se,ce,le=["className","children","size"],ue=function(e){var n=e.size,r=void 0===n?U.XSmall:n,t=Z[r],i=t.chevron,o=t.height,a=F.secondary,s=o/2;return(0,d.cx)(K({size:r}),(0,d.css)(ce||(ce=j(["\n      &::before {\n        background-color: ",";\n        box-shadow: 0 0 0 ","px transparent,\n          0 0 0 ","px transparent;\n      }\n    "])),a.backgroundColor,i.size,s))},fe=(0,i.forwardRef)((function(e,n){var r=e.className,t=void 0===r?"":r,i=e.children,o=e.size,a=z(e,le),s=function(e){return{base:(n=e,r=n.size,t=void 0===r?U.XSmall:r,i=Z[t],o=i.chevron,a=i.fontSize,s=i.fontWeight,c=i.gutter,l=i.height,u=i.lineHeight,f=F.color,h=F.secondary,p=l/2+2*o.size,(0,d.cx)(J({size:t}),G({size:t}),(0,d.css)(se||(se=j(["\n      background-color: ",";\n      color: ",";\n      padding: ","px ","px;\n      margin-right: ","px;\n      font-size: ","px;\n      font-weight: ",";\n      line-height: ",";\n      flex: 1 1 auto;\n      white-space: nowrap;\n      z-index: 2;\n\n      &::before {\n        white-space: nowrap;\n        content: '+' counter(hiddenCount);\n      }\n    "])),h.backgroundColor,f,c.vertical,c.horizontal,p,a,s,u))),chevron:ue(e)};var n,r,t,i,o,a,s,c,l,u,f,h,p}({size:o}),c=s.base,l=s.chevron;return(0,g.jsx)("div",O({},a,re.prop,{"data-testid":"pipeline-counter",className:(0,d.cx)(c,t),ref:n}),i,(0,g.jsx)("div",O({},te.prop,{"data-testid":"pipeline-counter-chevron",className:l})))}));fe.displayName="Counter",fe.propTypes={children:c().node,className:c().string,size:c().oneOf(Object.values(U)).isRequired};var de=e=>(0,i.isValidElement)(e)&&Boolean(e.props.children);const he=e=>null==e||"boolean"==typeof e||"{}"===JSON.stringify(e)?"":e.toString(),pe=e=>e instanceof Array||(0,i.isValidElement)(e)?i.Children.toArray(e).reduce(((e,n)=>{let r="";return r=(0,i.isValidElement)(n)&&de(n)?pe(n.props.children):(0,i.isValidElement)(n)&&!de(n)?"":he(n),e.concat(r)}),""):he(e);var ge,ve,be,ye=pe,me=["children","className","size"],we=function(e){var n=e.size,r=Z[n].minWidth;return(0,d.cx)(J({size:n}),(0,d.css)(ve||(ve=j(["\n      flex-grow: 1;\n      flex-shrink: 1;\n      flex-basis: 100%;\n      flex-wrap: wrap;\n      overflow: hidden;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      min-width: ","px;\n    "])),r))},xe="leafygreen-ui-pipeline-stage--last-visible",Oe=function(e){var n=e.hasHiddenStages,r=e.size,t=Z[r],i=t.height,o=t.chevron,s=F.primary,c=F.secondary,l=i/2,u=n?{innerColor:a.s.white,outerColor:c.backgroundColor}:{innerColor:"transparent",outerColor:"transparent"};return(0,d.css)(be||(be=j(["\n    ."," > ","::before {\n      background-color: ",";\n      box-shadow: 0 0 0 ","px ",",\n        0 0 0 ","px ",";\n    }\n  "])),xe,ne.selector,s.backgroundColor,o.size,u.innerColor,l,u.outerColor)},ze=(0,i.forwardRef)((function(e,n){var r=e.children,t=e.className,o=void 0===t?"":t,a=e.size,s=void 0===a?U.XSmall:a,c=z(e,me),l=S((0,i.useState)(null),2),p=l[0],v=l[1],y=S((0,i.useState)(!1),2),x=y[0],N=y[1];(0,h.Iy)(p,{childList:!0,subtree:!0,attributes:!0},(function(e){var n,r,t=e.map((function(e){return e.type}));(e.map((function(e){return e.attributeName})).includes("data-stage-visible")||t.includes("childList"))&&(r=(n=p)&&n.scrollHeight>n.clientHeight||n&&n.scrollWidth>n.clientWidth,N(r),function(){var e=Array.from(p.children);e.forEach((function(e){e.classList.remove(xe)}));var n=u()(e,(function(e){return"false"!==e.dataset.stageVisible}));n&&n.classList.add(xe)}())}));var C=i.Children.map(r,(function(e){var n,r={size:s,intersectionNode:p,ref:(0,i.createRef)()};return null!==(n=e)&&"object"===w(n)&&"type"in n&&"Stage"===n.type.displayName?i.cloneElement(e,r):i.createElement(ae,m(m({},r),{},{children:e}))})),k=function(e){var n=(i.Children.map(e,ye)||[]).filter(Boolean);return b()(n,(function(e,n,r){return r.length-1!==n?[e,">"]:e})).join(" ")}(C),P=function(e){return{base:(n=e,r=n.size,(0,d.cx)(J({size:r}),(0,d.css)(ge||(ge=j(["\n      counter-reset: hiddenCount;\n      flex-direction: row;\n    "]))))),pipeline:we(e),lastVisibleStageChevron:Oe(e)};var n,r}({hasHiddenStages:x,size:s}),E=P.base,V=P.pipeline,_=P.lastVisibleStageChevron;return(0,g.jsx)("div",O({},c,Q.prop,{"data-testid":"pipeline",ref:n,className:(0,d.cx)(E,o)}),(0,g.jsx)("ol",O({},Y.prop,{ref:v,"data-testid":"pipeline-stages",className:(0,d.cx)(V,_)}),C),x&&i.Children.count(C)>0&&(0,g.jsx)(f.ZP,{align:"top",justify:"middle",trigger:(0,g.jsx)(fe,{size:s}),triggerEvent:"hover",darkMode:!0},k))}));ze.displayName="Pipeline",ze.propTypes={children:c().node,className:c().string,size:c().oneOf(Object.values(U)).isRequired};var je=r(91949),Se=r(24246);function Ne(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ce(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ke={size:{type:"select",options:Object.values(U),default:U.XSmall,label:"Size"}},Pe=(0,o.iv)("display:flex;flex-direction:row;align-items:center;overflow:hidden;resize:horizontal;padding:2rem;margin:2rem;border:1px solid ",a.s.gray.light1,";min-width:180px;width:320px;","");function Ee(e){return(0,Se.jsx)("div",{className:Pe,children:(0,Se.jsx)(ze,Ce(Ce({},e),{},{children:["$match","$group","$project","$addFields","$limit"].map((function(e,n){return(0,Se.jsx)(ae,{children:e},"".concat(e,"-").concat(n))}))}))})}function Ve(){return(0,Se.jsx)(je.Z,{knobsConfig:ke,children:function(e){return(0,Se.jsx)(Ee,Ce({},e))}})}},58274:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/component/pipeline/example",function(){return r(76927)}])},58702:function(e,n){"use strict";var r=60103,t=60106,i=60107,o=60108,a=60114,s=60109,c=60110,l=60112,u=60113,f=60120,d=60115,h=60116,p=60121,g=60122,v=60117,b=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var m=Symbol.for;r=m("react.element"),t=m("react.portal"),i=m("react.fragment"),o=m("react.strict_mode"),a=m("react.profiler"),s=m("react.provider"),c=m("react.context"),l=m("react.forward_ref"),u=m("react.suspense"),f=m("react.suspense_list"),d=m("react.memo"),h=m("react.lazy"),p=m("react.block"),g=m("react.server.block"),v=m("react.fundamental"),b=m("react.debug_trace_mode"),y=m("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case i:case a:case o:case u:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case d:case s:return e;default:return n}}case t:return n}}}n.isFragment=function(e){return w(e)===i}},19185:function(e,n,r){"use strict";e.exports=r(58702)}},function(e){e.O(0,[8174,7690,1949,9774,2888,179],(function(){return n=58274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);